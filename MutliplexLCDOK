#include <Wire.h>
#include <Adafruit_GFX.h>
#include <LiquidCrystal_I2C.h>

// Select I2C BUS
void TCA9548A(uint8_t bus){
  Wire.beginTransmission(0x70);  // TCA9548A address
  Wire.write(1 << bus);          // send byte to select bus
  Wire.endTransmission();
  Serial.print("bus");
  Serial.print(bus);
}

LiquidCrystal_I2C lcd0(0x27 , 16, 2); // set the LCD address to 0x27, if new version please use 0x3F instead.
LiquidCrystal_I2C lcd1(0x27 , 16, 2); // set the LCD address to 0x27, if new version please use 0x3F instead.

void setup() {
  Serial.begin(115200);

   // Start I2C communication with the Multiplexer
  Wire.begin();

  
  TCA9548A(0); 
  lcd0.init();  //initialize the lcd
  lcd0.backlight();  //open the backlight
  
  TCA9548A(1); 
  lcd1.init();  //initialize the lcd
  lcd1.backlight();  //open the backlight
  

}
 
void loop() {

  // Write to OLED on bus number 0
  TCA9548A(0);
  lcd0.setCursor(3, 0); // set the cursor to column 3, line 0
  lcd0.print("Hello GeeekPi");  // Print a message to the LCD
  
  lcd0.setCursor(2, 1); // set the cursor to column 2, line 1
  lcd0.print("hello world");  // Print a message to the LCD.

  TCA9548A(1);
  // Write to OLED on bus number 1
  lcd1.setCursor(3, 0); // set the cursor to column 3, line 0
  lcd1.print("Hello");  // Print a message to the LCD
  
  lcd1.setCursor(2, 1); // set the cursor to column 2, line 1
  lcd1.print("Little Rock");  // Print a message to the LCD.
}
